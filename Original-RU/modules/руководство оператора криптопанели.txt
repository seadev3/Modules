КРИПТОПАНЕЛЬ
РУКОВОДСТВО ОПЕРАТОРА

ОБЗОР

Криптопанель является сервисом для автотестирования нагрузки, как специальной (модульный бот, бэкдор), так и произвольной.

Основные виды тестов:
- статическое сканирование на dyncheck.com
- динамическое сканирование на dyncheck.com
- автотесты модульного бота
- автотесты бэкдора
- автотесты на антивирусах (АВ)

Для тестов используется как чужой сервис (dyncheck.com), так и собственная ферма виртуальных машин.


ИНТЕРФЕЙС

Основной раздел Scan поделен на папки (Uncrypted, EXP, ZSS, итд).
С каждой папкой как правило работает отдельный пользователь.
Папки Uncrypted и Others общие.
В Uncrypted попадают некриптованные файлы, откуда их забирают криптеры, криптуют, и результаты складывают в свою папку.
В Others кладется произвольная нагрузка.

При заходе в папку видим файлы.
Для пользователей с соответствующими правами доступна также область для загрузки своих файлов - "Drop your files here or click to upload".

Далее поля:
Name       - имя файла
Size       - размер файла
Uploaded   - дата загрузки
Priority   - приоритет - у файлов с высшим приоритетом номер в очереди на тесты первее
Check      - запуск тестов:
  Static   - статическое сканирование на dyncheck.com 
  Dynamic  - динамическое сканирование на dyncheck.com 
  VM       - запуск автотеста на виртуальной машине (ВМ)
Reports    - отчеты
  * отчеты о статическом сканировании на dyncheck.com
  * отчеты о динамическом сканировании на dyncheck.com
  * отчеты об автотестах на ВМ
Actions
  Download - скачать файл
  Delete   - удалить файл

В окне запуска автотеста на ВМ мы видим список виртуальных машин, а также поле Test Type (в самом низу).
Типы тестов:
* regular - автотест модульного бота
* newbk   - автотест бэкдора
* AV only - тест произвольной нагрузки на АВ

Очевидно, что для тестируемого файла надо выбирать нужный тип теста.
То есть вы должны знать, что именно вы тестируете.
Если вы не знаете, что именно вы тестируете, выбирайте тип теста AV Only.
Нагрузка будет проверена в статике и в динамике.


ОТЧЕТЫ АВТОТЕСТОВ

При чтении отчетов с автотестов, каждая строка отчета сообщает о статусе прохождения определенной проверки.
В начале отчета обычно указан тип антивируса (если он есть на компьютере), например

AV: Bitdefender Total Security

Общие проверки:
- unarchived_static_detect: статическая проверка на АВ
- proactive_detect:         динамическая проверка на АВ
- network_status:           проверка работоспособности сети на тестовом компьютере

Модульный бот:
- client_installed:         бот установлен на компьютере и закреплен. Обычно, после этого указывается идентификатор бота, наподобие
DESKTOP-4KGAMLP_W10014393.3A98863768251B6D725CF14F86EDE3D5|yas43
- client_knocked:           бот отстучал в админку (показана строка отстука, наподобие
YYYY-MM-DD HH:MM:SS.MSEC 1 3 online

- client_modules_detect:    пост-проверка на АВ - антивирус не снёс бота после загрузки и запуска модулей

Бэкдор:
- для бэкдора показан лог выполнения команд на тестовом компьютере (на сегодня, команда Get_Sysinfo).
- bk_knocked:               бэкдор отстучал в админку

Таким образом, можно узнать, что происходило на каждой стадии выполнения нагрузки, и локализовать ошибку, если она есть.

Тест считается полностью пройденным, если пройдены все пункты автотестов.
Однако, это не является гарантией полной работоспособности нагрузки!
Например, потому, что количество окружений тестирования ограничено, и все случаи учесть невозможно.
Кроме того, не все функции нагрузки можно протестировать автоматически.


ПРОБЛЕМЫ

Автотесты - сложная система, и она иногда ломается.
Мы постарались сделать самодиагностику там где можно, но можно не для всего.
В любом случае, если вы видите одно из этих сообщений:

    Cryptopanel proxy <url> is down, please call system administrator.
    Automatic tests are disabled.

    Regular tests are disabled because Lero proxy <url> is down.
    Please call system administrator.

    New BK tests are disabled because BK proxy <url> is down.
    Please call system administrator.

значит что-то не работает и нужно звать кавалерию.

Иногда ошибки видны в отчетах:

* VM dont'get file in 10 min: ВМ не получила файл за 10 минут, задача на тест аннулирована.
Такое происходит когда:
- ВМ медленно работает
- сетевой сбой (нету связи)
- программный сбой скриптов автотеста
